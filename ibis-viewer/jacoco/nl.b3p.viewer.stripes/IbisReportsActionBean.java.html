<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>IbisReportsActionBean.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">IBIS viewer</a> &gt; <a href="index.source.html" class="el_package">nl.b3p.viewer.stripes</a> &gt; <span class="el_source">IbisReportsActionBean.java</span></div><h1>IbisReportsActionBean.java</h1><pre class="source lang-java linenums">/*
 * Copyright (C) 2016 B3Partners B.V.
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
 */
package nl.b3p.viewer.stripes;

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.io.StringReader;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import javax.activation.MimetypesFileTypeMap;
import javax.persistence.EntityManager;
import javax.servlet.http.HttpServletResponse;
import net.sourceforge.stripes.action.ActionBean;
import net.sourceforge.stripes.action.ActionBeanContext;
import net.sourceforge.stripes.action.Before;
import net.sourceforge.stripes.action.DefaultHandler;
import net.sourceforge.stripes.action.Resolution;
import net.sourceforge.stripes.action.StreamingResolution;
import net.sourceforge.stripes.action.StrictBinding;
import net.sourceforge.stripes.action.UrlBinding;
import net.sourceforge.stripes.controller.LifecycleStage;
import net.sourceforge.stripes.validation.DateTypeConverter;
import net.sourceforge.stripes.validation.Validate;
import nl.b3p.viewer.config.app.Application;
import nl.b3p.viewer.config.app.ConfiguredAttribute;
import nl.b3p.viewer.config.security.Authorizations;
import nl.b3p.viewer.config.services.AttributeDescriptor;
import nl.b3p.viewer.config.services.JDBCFeatureSource;
import nl.b3p.viewer.config.services.SimpleFeatureType;
import nl.b3p.viewer.features.CSVDownloader;
import nl.b3p.viewer.features.ExcelDownloader;
import nl.b3p.viewer.features.FeatureDownloader;
import nl.b3p.viewer.features.ShapeDownloader;
import nl.b3p.viewer.ibis.util.IbisConstants;
import nl.b3p.web.stripes.ErrorMessageResolution;
import org.apache.commons.io.IOUtils;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.geotools.data.FeatureSource;
import org.geotools.data.Query;
import org.geotools.data.simple.SimpleFeatureCollection;
import org.geotools.data.simple.SimpleFeatureIterator;
import org.geotools.data.simple.SimpleFeatureSource;
import org.geotools.factory.CommonFactoryFinder;
import org.geotools.util.factory.GeoTools;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import org.opengis.feature.simple.SimpleFeature;
import org.opengis.filter.Filter;
import org.opengis.filter.FilterFactory2;
import org.stripesstuff.stripersist.Stripersist;

/**
 *
 * @author mprins
 */
@UrlBinding(&quot;/action/ibisreports&quot;)
@StrictBinding
<span class="nc" id="L80">public class IbisReportsActionBean implements ActionBean, IbisConstants {</span>

<span class="nc" id="L82">    private static final Log log = LogFactory.getLog(IbisReportsActionBean.class);</span>

    private static final String JSON_METADATA = &quot;metaData&quot;;

    private ActionBeanContext context;
    @Validate(converter = DateTypeConverter.class)
    private Date fromDate;
    @Validate(converter = DateTypeConverter.class)
    private Date toDate;
    @Validate
    private String regio;
    @Validate
    private String gemeente;
    /**
     * download type.
     */
    @Validate
    private String type;

    @Validate
    private String report;

    @Validate
    private Application application;
    @Validate
    private JDBCFeatureSource attrSource;

    @Validate
    private String params;

    private boolean unauthorized;

    @Before(stages = LifecycleStage.EventHandling)
    public void checkAuthorization() {
<span class="nc" id="L116">        EntityManager em = Stripersist.getEntityManager();</span>
<span class="nc bnc" id="L117" title="All 4 branches missed.">        if (application == null || !Authorizations.isApplicationReadAuthorized(application, context.getRequest(), em)) {</span>
<span class="nc" id="L118">            unauthorized = true;</span>
        }
<span class="nc" id="L120">    }</span>

    public Resolution download() throws Exception {
<span class="nc" id="L123">        JSONObject json = new JSONObject();</span>
<span class="nc bnc" id="L124" title="All 2 branches missed.">        if (unauthorized) {</span>
<span class="nc" id="L125">            json.put(&quot;success&quot;, Boolean.FALSE);</span>
<span class="nc" id="L126">            json.put(&quot;message&quot;, &quot;Not authorized&quot;);</span>
<span class="nc" id="L127">            return new StreamingResolution(&quot;application/json&quot;, new StringReader(json.toString(4)));</span>
        }

<span class="nc" id="L130">        File output = null;</span>
        try {
<span class="nc" id="L132">            SimpleFeatureType sft = attrSource.getFeatureType(report);</span>
<span class="nc" id="L133">            Filter f = this.createFilters(sft);</span>
<span class="nc" id="L134">            List&lt;AttributeDescriptor&gt; attrs = sft.getAttributes();</span>

<span class="nc" id="L136">            SimpleFeatureSource fs = (SimpleFeatureSource) sft.openGeoToolsFeatureSource();</span>

<span class="nc" id="L138">            final Query q = new Query(fs.getName().toString());</span>
<span class="nc" id="L139">            q.setFilter(createFilters(sft));</span>
<span class="nc" id="L140">            log.debug(q);</span>

            // cannot forward to download action bean as that uses layers/appLayers
            //  while we use an attributesource
<span class="nc" id="L144">            Map&lt;String, AttributeDescriptor&gt; featureTypeAttributes = new HashMap();</span>
<span class="nc" id="L145">            List&lt;ConfiguredAttribute&gt; attributes = new ArrayList();</span>
            ConfiguredAttribute ca;
<span class="nc bnc" id="L147" title="All 2 branches missed.">            for (AttributeDescriptor ad : attrs) {</span>
<span class="nc" id="L148">                featureTypeAttributes.put(ad.getName(), ad);</span>
<span class="nc" id="L149">                ca = new ConfiguredAttribute();</span>
<span class="nc" id="L150">                ca.setVisible(true);</span>
<span class="nc" id="L151">                ca.setAttributeName(ad.getName());</span>
<span class="nc" id="L152">                attributes.add(ca);</span>
<span class="nc" id="L153">            }</span>

<span class="nc" id="L155">            output = convert(sft, fs, q, attributes, featureTypeAttributes);</span>
<span class="nc" id="L156">            json.put(&quot;success&quot;, true);</span>
<span class="nc" id="L157">        } catch (Exception e) {</span>
<span class="nc" id="L158">            log.error(&quot;Error loading features&quot;, e);</span>
<span class="nc" id="L159">            json.put(&quot;success&quot;, false);</span>

<span class="nc" id="L161">            String message = &quot;Fout bij ophalen features: &quot; + e.toString();</span>
<span class="nc" id="L162">            Throwable cause = e.getCause();</span>
<span class="nc bnc" id="L163" title="All 2 branches missed.">            while (cause != null) {</span>
<span class="nc" id="L164">                message += &quot;; &quot; + cause.toString();</span>
<span class="nc" id="L165">                cause = cause.getCause();</span>
            }
<span class="nc" id="L167">            json.put(&quot;message&quot;, message);</span>
<span class="nc" id="L168">        }</span>

<span class="nc bnc" id="L170" title="All 2 branches missed.">        if (json.getBoolean(&quot;success&quot;)) {</span>
<span class="nc" id="L171">            try (FileInputStream fis = new FileInputStream(output)){</span>
<span class="nc" id="L172">                StreamingResolution res = new StreamingResolution(MimetypesFileTypeMap.getDefaultFileTypeMap().getContentType(output)) {</span>
                    @Override
                    public void stream(HttpServletResponse response) throws Exception {
<span class="nc" id="L175">                        OutputStream out = response.getOutputStream();</span>
<span class="nc" id="L176">                        IOUtils.copy(fis, out);</span>
<span class="nc" id="L177">                        fis.close();</span>
<span class="nc" id="L178">                    }</span>
                };
<span class="nc" id="L180">                String name = output.getName();</span>
<span class="nc" id="L181">                String extension = name.substring(name.lastIndexOf(&quot;.&quot;));</span>
<span class="nc" id="L182">                SimpleDateFormat today = new SimpleDateFormat(&quot;yyyy_MM_dd&quot;);</span>
<span class="nc" id="L183">                String newName = &quot;download-&quot; + report + &quot;-&quot; + today.format(new Date()) + extension;</span>
<span class="nc" id="L184">                res.setFilename(newName);</span>
<span class="nc" id="L185">                res.setAttachment(true);</span>
<span class="nc" id="L186">                return res;</span>
            } finally {
<span class="nc" id="L188">                output.delete();</span>
            }
        } else {
<span class="nc" id="L191">            return new ErrorMessageResolution(json.getString(&quot;message&quot;));</span>
        }
    }

    @DefaultHandler
    public Resolution execute() throws Exception {
<span class="nc" id="L197">        JSONObject json = new JSONObject();</span>
<span class="nc" id="L198">        json.put(&quot;success&quot;, Boolean.FALSE);</span>
        // initial metadata
<span class="nc" id="L200">        JSONObject metadata = new JSONObject()</span>
<span class="nc" id="L201">                .put(&quot;root&quot;, &quot;data&quot;).put(&quot;totalProperty&quot;, &quot;total&quot;)</span>
<span class="nc" id="L202">                .put(&quot;successProperty&quot;, &quot;success&quot;)</span>
<span class="nc" id="L203">                .put(&quot;messageProperty&quot;, &quot;message&quot;)</span>
<span class="nc" id="L204">                .put(&quot;idProperty&quot;, &quot;rownum&quot;);</span>
<span class="nc" id="L205">        json.put(JSON_METADATA, metadata);</span>

<span class="nc" id="L207">        String error = null;</span>
<span class="nc bnc" id="L208" title="All 2 branches missed.">        if (attrSource == null) {</span>
<span class="nc" id="L209">            error = &quot;Invalid parameters.&quot;;</span>
<span class="nc bnc" id="L210" title="All 2 branches missed.">        } else if (unauthorized) {</span>
<span class="nc" id="L211">            error = &quot;Not authorized.&quot;;</span>
<span class="nc bnc" id="L212" title="All 2 branches missed.">        } else if (report == null) {</span>
<span class="nc" id="L213">            error = &quot;Report type is required.&quot;;</span>
        }
<span class="nc" id="L215">        SimpleFeatureType sft = attrSource.getFeatureType(report);</span>
<span class="nc" id="L216">        List&lt;AttributeDescriptor&gt; attrs = sft.getAttributes();</span>

<span class="nc" id="L218">        SimpleFeatureSource fs = null;</span>
        try {
<span class="nc" id="L220">            fs = (SimpleFeatureSource) sft.openGeoToolsFeatureSource();</span>

<span class="nc" id="L222">            final Query q = new Query(fs.getName().toString());</span>
<span class="nc" id="L223">            q.setFilter(createFilters(sft));</span>
<span class="nc" id="L224">            log.debug(q);</span>

<span class="nc" id="L226">            SimpleFeatureCollection sfc = fs.getFeatures(q);</span>

<span class="nc" id="L228">            featuresToJson(sfc, json, attrs/*attribuutnamen*/);</span>

<span class="nc" id="L230">            json.put(&quot;message&quot;, &quot;OK&quot;);</span>
<span class="nc" id="L231">            json.put(&quot;success&quot;, Boolean.TRUE);</span>
<span class="nc" id="L232">        } catch (Exception e) {</span>
<span class="nc" id="L233">            log.error(&quot;Error generating report data.&quot;, e);</span>
<span class="nc" id="L234">            error = e.getLocalizedMessage();</span>
        } finally {
<span class="nc bnc" id="L236" title="All 2 branches missed.">            if (fs != null) {</span>
<span class="nc" id="L237">                fs.getDataStore().dispose();</span>
            }
        }
<span class="nc bnc" id="L240" title="All 2 branches missed.">        if (error != null) {</span>
<span class="nc" id="L241">            json.put(&quot;success&quot;, Boolean.FALSE);</span>
<span class="nc" id="L242">            json.put(&quot;message&quot;, error);</span>
        }

<span class="nc" id="L245">        log.debug(&quot;returning json:&quot; + json);</span>
<span class="nc" id="L246">        return new StreamingResolution(&quot;application/json&quot;, new StringReader(json.toString()));</span>
    }

    private Filter createFilters(SimpleFeatureType sft) {
<span class="nc" id="L250">        FilterFactory2 ff = CommonFactoryFinder.getFilterFactory2(GeoTools.getDefaultHints());</span>
<span class="nc" id="L251">        List&lt;Filter&gt; filters = new ArrayList&lt;&gt;();</span>
        // regio
<span class="nc bnc" id="L253" title="All 4 branches missed.">        if (this.regio != null &amp;&amp; sft.getAttribute(&quot;vvr_naam&quot;) != null) {</span>
<span class="nc" id="L254">            filters.add(ff.equals(ff.property(&quot;vvr_naam&quot;), ff.literal(regio)));</span>
        }
        // regio
<span class="nc bnc" id="L257" title="All 4 branches missed.">        if (this.regio != null &amp;&amp; sft.getAttribute(&quot;wgr_naam&quot;) != null) {</span>
<span class="nc" id="L258">            filters.add(ff.equals(ff.property(&quot;wgr_naam&quot;), ff.literal(regio)));</span>
        }
<span class="nc bnc" id="L260" title="All 4 branches missed.">        if (this.gemeente != null &amp;&amp; sft.getAttribute(&quot;gemeentenaam&quot;) != null) {</span>
<span class="nc" id="L261">            filters.add(ff.equals(ff.property(&quot;gemeentenaam&quot;), ff.literal(gemeente)));</span>
        }
<span class="nc bnc" id="L263" title="All 4 branches missed.">        if (this.toDate != null &amp;&amp; sft.getAttribute(&quot;datum&quot;) != null) {</span>
<span class="nc" id="L264">            filters.add(ff.before(ff.property(&quot;datum&quot;), ff.literal(toDate)));</span>
        }
<span class="nc bnc" id="L266" title="All 4 branches missed.">        if (this.fromDate != null &amp;&amp; sft.getAttribute(&quot;datum&quot;) != null) {</span>
<span class="nc" id="L267">            filters.add(ff.after(ff.property(&quot;datum&quot;), ff.literal(fromDate)));</span>
        }

<span class="nc bnc" id="L270" title="All 2 branches missed.">        if (filters.size() &gt; 1) {</span>
<span class="nc" id="L271">            return ff.and(filters);</span>
<span class="nc bnc" id="L272" title="All 2 branches missed.">        } else if (filters.size() == 1) {</span>
<span class="nc" id="L273">            return filters.get(0);</span>
        } else {
<span class="nc" id="L275">            return Filter.INCLUDE;</span>
        }
    }

    /**
     * Convert a SimpleFeatureCollection to JSON with metadata.
     *
     * @param sfc collections of features
     * @param json output/appendend to json structure
     * @param featureTypeAttributes flamingo attribute descriptors for the
     * features
     * @throws JSONException if any
     */
    private void featuresToJson(SimpleFeatureCollection sfc, JSONObject json,
            List&lt;AttributeDescriptor&gt; featureTypeAttributes) throws JSONException {

        // metadata for fData fields
<span class="nc" id="L292">        JSONArray fields = new JSONArray();</span>
        // columns for grid
<span class="nc" id="L294">        JSONArray columns = new JSONArray();</span>
        // fData payload
<span class="nc" id="L296">        JSONArray datas = new JSONArray();</span>

<span class="nc" id="L298">        boolean getMetadataFromFirstFeature = true;</span>
<span class="nc" id="L299">        try (SimpleFeatureIterator sfIter = sfc.features()) {</span>
<span class="nc bnc" id="L300" title="All 2 branches missed.">            while (sfIter.hasNext()) {</span>
<span class="nc" id="L301">                SimpleFeature feature = sfIter.next();</span>
<span class="nc" id="L302">                JSONObject fData = new JSONObject();</span>

<span class="nc bnc" id="L304" title="All 2 branches missed.">                for (AttributeDescriptor attr : featureTypeAttributes) {</span>
<span class="nc" id="L305">                    String name = attr.getName();</span>
<span class="nc bnc" id="L306" title="All 2 branches missed.">                    if (getMetadataFromFirstFeature) {</span>
                        // only load metadata into json this for first feature
<span class="nc" id="L308">                        JSONObject field = new JSONObject().put(&quot;name&quot;, name).put(&quot;type&quot;, attr.getExtJSType());</span>
<span class="nc bnc" id="L309" title="All 2 branches missed.">                        if (attr.getType().equals(AttributeDescriptor.TYPE_DATE)) {</span>
<span class="nc" id="L310">                            field.put(&quot;dateFormat&quot;, &quot;Y-m&quot;);</span>
                        }
<span class="nc" id="L312">                        fields.put(field);</span>
<span class="nc bnc" id="L313" title="All 2 branches missed.">                        columns.put(new JSONObject().put(&quot;text&quot;, (attr.getAlias() != null ? attr.getAlias() : name)).put(&quot;dataIndex&quot;, name));</span>
                    }
<span class="nc" id="L315">                    fData.put(attr.getName(), feature.getAttribute(attr.getName()));</span>
<span class="nc" id="L316">                }</span>
<span class="nc" id="L317">                datas.put(fData);</span>
<span class="nc" id="L318">                getMetadataFromFirstFeature = false;</span>
<span class="nc" id="L319">            }</span>

<span class="nc" id="L321">            json.getJSONObject(JSON_METADATA).put(&quot;fields&quot;, fields);</span>
<span class="nc" id="L322">            json.getJSONObject(JSON_METADATA).put(&quot;columns&quot;, columns);</span>
<span class="nc" id="L323">            json.put(&quot;data&quot;, datas);</span>
<span class="nc" id="L324">            json.put(&quot;total&quot;, datas.length());</span>
        }
<span class="nc" id="L326">    }</span>

    private File convert(SimpleFeatureType ft, FeatureSource fs, Query q, List&lt;ConfiguredAttribute&gt; attributes,
            Map&lt;String, AttributeDescriptor&gt; featureTypeAttributes) throws IOException {

<span class="nc" id="L331">        Map&lt;String, String&gt; attributeAliases = new HashMap&lt;&gt;();</span>
<span class="nc bnc" id="L332" title="All 2 branches missed.">        for (AttributeDescriptor ad : ft.getAttributes()) {</span>
<span class="nc bnc" id="L333" title="All 2 branches missed.">            if (ad.getAlias() != null) {</span>
<span class="nc" id="L334">                attributeAliases.put(ad.getName(), ad.getAlias());</span>
            } else {
<span class="nc" id="L336">                attributeAliases.put(ad.getName(), ad.getName());</span>
            }
<span class="nc" id="L338">        }</span>

<span class="nc" id="L340">        SimpleFeatureCollection fc = (SimpleFeatureCollection) fs.getFeatures(q);</span>
<span class="nc" id="L341">        File f = null;</span>
        // alle kolommen autosizen op inhoud
<span class="nc" id="L343">        StringBuilder autosizeAttr = new StringBuilder(&quot;,autoSize=&quot;);</span>
<span class="nc bnc" id="L344" title="All 2 branches missed.">        for (ConfiguredAttribute configuredAttribute : attributes) {</span>
<span class="nc" id="L345">            autosizeAttr.append(configuredAttribute.getAttributeName()).append(&quot;|&quot;);</span>
<span class="nc" id="L346">        }</span>
<span class="nc" id="L347">        params = params + autosizeAttr;</span>

<span class="nc" id="L349">        FeatureDownloader downloader = null;</span>
<span class="nc bnc" id="L350" title="All 2 branches missed.">        if (type.equalsIgnoreCase(&quot;SHP&quot;)) {</span>
<span class="nc" id="L351">            downloader = new ShapeDownloader(attributes, (SimpleFeatureSource) fs, featureTypeAttributes, attributeAliases, params);</span>
<span class="nc bnc" id="L352" title="All 2 branches missed.">        } else if (type.equalsIgnoreCase(&quot;XLS&quot;)) {</span>
<span class="nc" id="L353">            downloader = new ExcelDownloader(attributes, (SimpleFeatureSource) fs, featureTypeAttributes, attributeAliases, params);</span>
<span class="nc bnc" id="L354" title="All 2 branches missed.">        } else if (type.equals(&quot;CSV&quot;)) {</span>
<span class="nc" id="L355">            downloader = new CSVDownloader(attributes, (SimpleFeatureSource) fs, featureTypeAttributes, attributeAliases, params);</span>
        } else {
<span class="nc" id="L357">            throw new IllegalArgumentException(&quot;No suitable type given: &quot; + type);</span>
        }

        try {
<span class="nc" id="L361">            downloader.init();</span>
<span class="nc" id="L362">            try (SimpleFeatureIterator it = fc.features()) {</span>
<span class="nc bnc" id="L363" title="All 2 branches missed.">                while (it.hasNext()) {</span>
<span class="nc" id="L364">                    SimpleFeature feature = it.next();</span>
<span class="nc" id="L365">                    downloader.processFeature(feature);</span>
<span class="nc" id="L366">                }</span>
            }
<span class="nc" id="L368">            f = downloader.write();</span>
<span class="nc" id="L369">        } catch (IOException ex) {</span>
<span class="nc" id="L370">            log.error(&quot;Cannot create outputfile: &quot;, ex);</span>
<span class="nc" id="L371">            throw ex;</span>
        } finally {
<span class="nc" id="L373">            fs.getDataStore().dispose();</span>
        }
<span class="nc" id="L375">        log.debug(&quot;returning file &quot; + f);</span>
<span class="nc" id="L376">        return f;</span>
    }

    //&lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;getters en setters&quot;&gt;
    @Override
    public ActionBeanContext getContext() {
<span class="nc" id="L382">        return context;</span>
    }

    @Override
    public void setContext(ActionBeanContext context) {
<span class="nc" id="L387">        this.context = context;</span>
<span class="nc" id="L388">    }</span>

    public Date getFromDate() {
<span class="nc" id="L391">        return fromDate;</span>
    }

    public void setFromDate(Date fromDate) {
<span class="nc" id="L395">        this.fromDate = fromDate;</span>
<span class="nc" id="L396">    }</span>

    public Date getToDate() {
<span class="nc" id="L399">        return toDate;</span>
    }

    public void setToDate(Date toDate) {
<span class="nc" id="L403">        this.toDate = toDate;</span>
<span class="nc" id="L404">    }</span>

    public String getRegio() {
<span class="nc" id="L407">        return regio;</span>
    }

    public void setRegio(String regio) {
<span class="nc" id="L411">        this.regio = regio;</span>
<span class="nc" id="L412">    }</span>

    public String getGemeente() {
<span class="nc" id="L415">        return gemeente;</span>
    }

    public void setGemeente(String gemeente) {
<span class="nc" id="L419">        this.gemeente = gemeente;</span>
<span class="nc" id="L420">    }</span>

    public String getType() {
<span class="nc" id="L423">        return type;</span>
    }

    public void setType(String type) {
<span class="nc" id="L427">        this.type = type;</span>
<span class="nc" id="L428">    }</span>

    public String getReport() {
<span class="nc" id="L431">        return report;</span>
    }

    public void setReport(String report) {
<span class="nc" id="L435">        this.report = report;</span>
<span class="nc" id="L436">    }</span>

    public Application getApplication() {
<span class="nc" id="L439">        return application;</span>
    }

    public void setApplication(Application application) {
<span class="nc" id="L443">        this.application = application;</span>
<span class="nc" id="L444">    }</span>

    public JDBCFeatureSource getAttrSource() {
<span class="nc" id="L447">        return attrSource;</span>
    }

    public void setAttrSource(JDBCFeatureSource attrSource) {
<span class="nc" id="L451">        this.attrSource = attrSource;</span>
<span class="nc" id="L452">    }</span>

    
    public String getParams() {
<span class="nc" id="L456">        return params;</span>
    }

    public void setParams(String params) {
<span class="nc" id="L460">        this.params = params;</span>
<span class="nc" id="L461">    }</span>
    //&lt;/editor-fold&gt;
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>