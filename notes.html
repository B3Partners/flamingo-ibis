<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8 at 01-February-2018 
 | Rendered using Apache Maven Fluido Skin 1.6
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20180201" />
    <meta http-equiv="Content-Language" content="en" />
    <title>IBIS Flamingo-mc 2.19 &#x2013; Deployment notes</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.6.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
      <script type="text/javascript" src="./js/apache-maven-fluido-1.6.min.js"></script>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
            <link rel="icon" href="favicon.ico" type="image/x-icon" />
      </head>
    <body class="topBarDisabled">
      <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><a href="http://www.b3partners.nl/" id="bannerLeft"><img src="images/logo.png"  alt="B3partners"/></a></div>
        <div class="pull-right"><a href="https://github.com/B3Partners/flamingo-ibis/" id="bannerRight"><h2>IBIS Flamingo-mc</h2>
</a></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 01-February-2018<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.19</li>
      <li class="pull-right"><a href="https://github.com/B3Partners/flamingo-ibis/issues/" class="externalLink" title="Issues dashboard">Issues dashboard</a></li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
<ul class="nav nav-list">
          <li class="nav-header">Information</li>
    <li><a href="index.html" title="About"><span class="none"></span>About</a>  </li>
    <li class="active"><a href="#"><span class="none"></span>Deployment notes</a>
  </li>
    <li><a href="releasenotes.html" title="Release notes"><span class="none"></span>Release notes</a>  </li>
    <li><a href="development.html" title="Developer Notes"><span class="none"></span>Developer Notes</a>  </li>
    <li><a href="https://github.com/flamingo-geocms/flamingo/wiki/" class="externalLink" title="Flamingo Wiki"><span class="none"></span>Flamingo Wiki</a>  </li>
          <li class="nav-header">Modules</li>
    <li><a href="ibis-viewer/index.html" title="IBIS viewer"><span class="none"></span>IBIS viewer</a>  </li>
    <li><a href="ibis-viewer-admin/index.html" title="IBIS viewer-admin"><span class="none"></span>IBIS viewer-admin</a>  </li>
    <li><a href="ibis-dist/index.html" title="IBIS distributie"><span class="none"></span>IBIS distributie</a>  </li>
          <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a>  </li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a>  </li>
  </ul>
          <hr />
          <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
  <a href="https://travis-ci.org/B3Partners/flamingo-ibis" title="Travis-CI Build status (master branch)" class="builtBy"><img class="builtBy"  alt="Travis-CI Build status (master branch)" src="https://travis-ci.org/B3Partners/flamingo-ibis.svg?branch=master"    /></a>
<a href="https://ci.appveyor.com/project/mprins/flamingo-ibis/branch/master" title="AppVeyor Build status (master branch)" class="builtBy"><img class="builtBy"  alt="AppVeyor Build status (master branch)" src="https://ci.appveyor.com/api/projects/status/q1ot2g75acadrbw0/branch/master?svg=true"    /></a>
<a href="https://github.com/flamingo-geocms" title="Flamingo Geo CMS" class="builtBy"><img class="builtBy"  alt="Flamingo Geo CMS" src="https://avatars1.githubusercontent.com/u/4628473?v=3&s=200"    /></a>
              </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>Deployment notes</h1>
<div class="section">
<div class="section">
<h3><a name="IbisDrawing_component"></a>IbisDrawing component</h3>
<p>This is a comonent similar to the regular drawing component, however it combines bookmark functionality so that once a sketch has been made a message can be sent with a bookmark link that points to the drawing. When configuring the <tt>Doel Flamingo applicatie</tt> to open the bookmark in a different viewer (eg. PROVINCIE) than the originating viewer (eg. GEMEENTE) this must be a mashup to make things work. Note that bookmarks on the &#x201c;Beheer bookmarks&#x201d; page will always point to the originating application.</p></div>
<div class="section">
<h3><a name="IbisEdit_component"></a>IbisEdit component</h3>
<p>This is a subclass of the regular Edit component to support workflow.</p>
<p>The title of this component is update when attribute data is loaded to reflect the object being edited, the fields supported for this are:</p>
<ul>

<li>gemeentenaam</li>
<li>a_plannaam</li>
<li>terreinid</li>
<li>rin_nr</li>
</ul></div>
<div class="section">
<h3><a name="IbisFactsheet_component"></a>IbisFactsheet component</h3>
<p>This component extends the featureinfo popup with a link to provide extra information on the kavels layer, the link text is the title of the component (no title - no link).</p>
<p>Configure the component to use the kavels layer as the &#x201c;Factsheet kaartlaag&#x201d;. The kavels layer should have the following joins and relates configured:</p>
<ul>

<li>this view no longer exists; <tt>kaveloppervlak</tt> is a field in kavel table <s>join to the view that provides area information for the kavels </s><tt><s>v_kavel_oppervlakte</s></tt><s> (</s><tt><s>gt_key</s></tt><s> = </s><tt><s>gt_key</s></tt><s>)</s></li>
<li>join to the view that provides factsheet information <tt>v_factsheet_terrein_info</tt> (<tt>terreinid</tt> = <tt>terreinid</tt>)</li>
<li>relate to <tt>v_grootste_10_bedrijven_op_terrein</tt> which provide the 10 biggest companies on the terrain that the kavel is part of (<tt>terreinid</tt> = <tt>terreinid</tt>).</li>
</ul>
<p>In the components &#x201c;Selecteer de kaartlagen voor de legenda&#x201d; list check the layers to be part of the legend (Bedrijventerrein begrenzing and Bedrijventerrein kavels)</p>
<p>To be able to zoom in to the terrein the geometry field of the <tt>v_factsheet_terrein_info</tt> must be checked in the attributes tab.</p><!--
### IbisReport component

The IbisReport uses a special layer that is only to be used for the component
and not anything else.

  - Create a layer "ibis report component" based on the `v_component_ibis_report`
    that is created from the same view. Attach a WFS attribue source to this layer.
  - Create a `relate` feature type relation to the view `v_component_ibis_report_uitgifte`
    linking "v_component_ibis_report":ibis_id to "v_component_ibis_report_uitgifte":terreinid
  - Add the layer to the application, but give it a place of it's own in
    "Boomstructuuur met kaart" so it won't show up in the legend. eg.
    `Applicatie > niet in de kaart > ibis report component > ibis report component`,
    turn on __all__ attributes. (Do __not__ add the layer to the "Kaartbeeld")
  - Add the IbisReport component to the application, either as a sidebar component 
    or a popup, configure it to use "ibis report component" as layer, select
    which attributes should be available as aggregate.
-->
</div>
<div class="section">
<h3><a name="IbisReports_component"></a>IbisReports component</h3>
<p>The IbisReports uses a special layer that is only to be used for the component and not anything else. Next to that it directly uses an &#x201c;Attribuutbron&#x201d; to retrieve data of the views specified in the control admin.</p>
<ul>

<li>Create a layer &#x201c;ibis report component&#x201d; based on the <tt>v_component_ibis_report</tt> that is created from the same view. Attach a WFS attribute source to this layer.</li>
<li>Add the layer to the application, but give it a place of it&#x2019;s own in &#x201c;Boomstructuuur met kaart&#x201d; so it won&#x2019;t show up in the legend. eg. <tt>Applicatie &gt; niet in de kaart &gt; ibis report component &gt; ibis report component</tt>, turn on <b>all</b> attributes. (Do <b>not</b> add the layer to the &#x201c;Kaartbeeld&#x201d;)</li>
<li>Add the IbisReports component to the application, either as a sidebar component or a popup, configure it to use &#x201c;ibis report component&#x201d; as layer (IbisRapportages component kaartlaag (component view))</li>
<li>choose the IbisReports attribuutbron to use for locating the views (make sure it is up-to-date)</li>
<li>add the views to generate reporting buttons using the &#x201c;Rapport toevoegen&#x201d; button, enter a button label and a table or view name (clear the to remove an entry)</li>
</ul>
<p>There are some css classes available for additional styling:</p>
<ul>

<li><tt>IbisReportBtn</tt> for the sidebar button</li>
<li><tt>IbisReportFormTitel</tt> for the headers in the criteria form</li>
<li><tt>IbisReportFormBtn</tt> for the report buttons</li>
</ul>
<p>Filtering occurs on the following fields:</p>
<ul>

<li>Regio: [vvr_naam = <tt>value</tt>]</li>
<li>Gemeente: [gemeentenaam = <tt>value</tt>]</li>
<li>Begindatum: [datum after <tt>value</tt>]</li>
<li>Einddatum: [datum before <tt>value</tt>]</li>
</ul>
<p>If fields don&#x2019;t match they won&#x2019;t be used for filtering, eg. if a table has no <tt>einddatum</tt> field but the user selects on anyway it will be ignored.</p></div>
<div class="section">
<h3><a name="IbisLocationFinder_component"></a>IbisLocationFinder component</h3>
<p>The IbisLocationFinder uses the same layer as the IbisReport component, see above for configuration. The two components share a common datastore so that the location data only needs to be downloaded once.</p></div>
<div class="section">
<h3><a name="Other_Flamingo_joins_and_relates"></a>Other Flamingo joins and relates</h3>
<ul>

<li>join <tt>bedrijventerrein</tt> to <tt>gemeente</tt> (<tt>gemeente_naam</tt> = <tt>naam</tt>)</li>
<li>join <tt>bedrijventerrein</tt> to <tt>v_terrein_oppervlakte</tt> (<tt>gt_pkey</tt> = <tt>gt_pkey</tt>)</li>
</ul></div>
<div class="section">
<h3><a name="Workflow"></a>Workflow</h3>
<p>For the possible values list in the viewer-admin edit configuration use the following for the layers that have workflow enabled (kavels + terreinen): <tt>bewerkt:Bewerkt,definitief:Definitief,archief:Archief,afgevoerd:Afgevoerd</tt></p>
<p><i>note</i> there is no space after the comma.</p>
<p>Next add the following (workflow) user groups in flamingo and add the users to the groups: - workflow_gemeente - workflow_provincie - workflow_admin (can change any status to any other status)</p>
<p>If you need to prevent some users from editing geometry create a usergroup for that (eg. cannot_edit_geometry) and attach them to this group, next specify the group on that cannot edit geometry on the layer in the &#x201c;Service en Kaartlagen&#x201d; view of the viewer-admin</p></div></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2018
<a href="http://www.b3partners.nl/">B3partners</a>.
All rights reserved.</p>
        </div>
        </div>
    </footer>
    </body>
</html>
